# ğŸ—ï¸ System Architecture - RFID Team Attendance System

## ğŸ“Š High-Level Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       RFID ATTENDANCE SYSTEM                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   RFID Reader   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚   Django API    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚    Database     â”‚
â”‚   (Hardware)    â”‚         â”‚   (Backend)     â”‚         â”‚   (SQLite3)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                             â”‚                           â”‚
       â”‚                             â”‚                           â”‚
       â–¼                             â–¼                           â–¼
  Scan RFID              Process Request              Store Data
   Card UID              Toggle Status                Retrieve Logs
```

---

## ğŸ”„ Two-Phase System Flow

### Phase 1: Registration (One-Time)

```
START
  â”‚
  â”œâ”€â–¶ [Admin] Creates Team â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ POST /api/teams
  â”‚        â”‚
  â”‚        â””â”€â–¶ Team ID Generated
  â”‚
  â”œâ”€â–¶ [Student] Taps RFID Card â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ (Admin reads UID)
  â”‚        â”‚
  â”‚        â””â”€â–¶ RFID UID: "ABC123XYZ"
  â”‚
  â”œâ”€â–¶ [Admin] Enters Student Name â”€â”€â”€â”€â”€â”€â”€â–¶ POST /api/students/register
  â”‚        â”‚                                   {
  â”‚        â”‚                                     team_id: 1,
  â”‚        â”‚                                     student_name: "John Doe",
  â”‚        â”‚                                     rfid_uid: "ABC123XYZ"
  â”‚        â”‚                                   }
  â”‚        â”‚
  â”‚        â””â”€â–¶ Student Registered
  â”‚
  â”œâ”€â–¶ Repeat for 6 Students
  â”‚
  â””â”€â–¶ Team Auto-Completes âœ“
```

### Phase 2: Attendance (Ongoing)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    RFID Attendance Flow                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

[Student Taps RFID Card]
         â”‚
         â–¼
   POST /api/attendance/tap
   { "rfid_uid": "ABC123XYZ" }
         â”‚
         â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  1. Find Student by UID â”‚
   â”‚  2. Get Last Status     â”‚
   â”‚  3. Toggle IN/OUT       â”‚
   â”‚  4. Create Log          â”‚
   â”‚  5. Return Status       â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Status Toggle Logic:                 â”‚
â”‚                                      â”‚
â”‚ If last status = IN  â”€â”€â–¶ New: OUT   â”‚
â”‚ If last status = OUT â”€â”€â–¶ New: IN    â”‚
â”‚ If no previous   â”€â”€â–¶ New: IN        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
   Response: { status: "IN" or "OUT" }
```

---

## ğŸ—„ï¸ Database Schema Relationships

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       TEAM         â”‚
â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚ id (PK)            â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”
â”‚ team_name          â”‚        â”‚
â”‚ is_complete        â”‚        â”‚  1:N (One team has many students)
â”‚ created_at         â”‚        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
                              â”‚
                              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚      STUDENT       â”‚        â”‚
â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚        â”‚
â”‚ id (PK)            â”‚        â”‚
â”‚ name               â”‚        â”‚
â”‚ rfid_uid (UNIQUE)  â”‚        â”‚
â”‚ team_id (FK) â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ registered_at      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚  1:N (One student has many logs)
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ATTENDANCELOG    â”‚
â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚ id (PK)            â”‚
â”‚ student_id (FK)    â”‚
â”‚ team_id (FK)       â”‚
â”‚ status (IN/OUT)    â”‚
â”‚ check_in_time      â”‚
â”‚ check_out_time     â”‚
â”‚ created_at         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”€ Request-Response Flow

### Example: RFID Tap

```
Client                     API                      Database
  â”‚                         â”‚                          â”‚
  â”‚  POST /api            â”‚                          â”‚
  â”‚  attendance/tap       â”‚                          â”‚
  â”‚  {rfid: "ABC123"}     â”‚                          â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚                          â”‚
  â”‚                         â”‚                          â”‚
  â”‚                         â”‚  SELECT * FROM student  â”‚
  â”‚                         â”‚  WHERE rfid_uid = ?     â”‚
  â”‚                         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚
  â”‚                         â”‚                          â”‚
  â”‚                         â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚                         â”‚  Student Found: ID=1    â”‚
  â”‚                         â”‚                          â”‚
  â”‚                         â”‚  SELECT * FROM log      â”‚
  â”‚                         â”‚  WHERE student_id = 1   â”‚
  â”‚                         â”‚  ORDER BY created DESC  â”‚
  â”‚                         â”‚  LIMIT 1                â”‚
  â”‚                         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚
  â”‚                         â”‚                          â”‚
  â”‚                         â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚                         â”‚  Last Status: OUT       â”‚
  â”‚                         â”‚                          â”‚
  â”‚                         â”‚  INSERT INTO log        â”‚
  â”‚                         â”‚  (status='IN', ...)     â”‚
  â”‚                         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚
  â”‚                         â”‚                          â”‚
  â”‚                         â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚                         â”‚  Log Created: ID=42     â”‚
  â”‚                         â”‚                          â”‚
  â”‚  200 OK                â”‚                          â”‚
  â”‚  {status: "IN"}        â”‚                          â”‚
  â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                          â”‚
  â”‚                         â”‚                          â”‚
```

---

## ğŸ§© Component Breakdown

### 1. Models Layer (`models.py`)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           Data Models               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ Team                              â”‚
â”‚ â€¢ Student                           â”‚
â”‚ â€¢ AttendanceLog                     â”‚
â”‚                                     â”‚
â”‚ Responsibilities:                   â”‚
â”‚ - Define data structure             â”‚
â”‚ - Enforce database constraints      â”‚
â”‚ - Model-level validation            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. Business Logic Layer (`utils.py`)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Business Logic              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ TeamValidator                     â”‚
â”‚ â€¢ RegistrationService               â”‚
â”‚ â€¢ AttendanceService                 â”‚
â”‚                                     â”‚
â”‚ Responsibilities:                   â”‚
â”‚ - Business rule enforcement         â”‚
â”‚ - Complex validation                â”‚
â”‚ - Data processing logic             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3. API Layer (`views.py`)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          API Endpoints              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ create_team                       â”‚
â”‚ â€¢ register_student                  â”‚
â”‚ â€¢ rfid_tap                          â”‚
â”‚ â€¢ Query endpoints                   â”‚
â”‚                                     â”‚
â”‚ Responsibilities:                   â”‚
â”‚ - HTTP request handling             â”‚
â”‚ - JSON parsing/formatting           â”‚
â”‚ - Error responses                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4. URL Routing Layer (`urls.py`)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          URL Routing                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ /api/teams          â†’ create_team   â”‚
â”‚ /api/students/...   â†’ register      â”‚
â”‚ /api/attendance/... â†’ rfid_tap      â”‚
â”‚                                     â”‚
â”‚ Responsibilities:                   â”‚
â”‚ - Map URLs to views                 â”‚
â”‚ - Route parameters                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## âš¡ Data Flow Diagrams

### Team Completion Trigger

```
Register Student #1 â”€â”€â–¶ Team: 1/6 students â”€â”€â–¶ is_complete: false
Register Student #2 â”€â”€â–¶ Team: 2/6 students â”€â”€â–¶ is_complete: false
Register Student #3 â”€â”€â–¶ Team: 3/6 students â”€â”€â–¶ is_complete: false
Register Student #4 â”€â”€â–¶ Team: 4/6 students â”€â”€â–¶ is_complete: false
Register Student #5 â”€â”€â–¶ Team: 5/6 students â”€â”€â–¶ is_complete: false
Register Student #6 â”€â”€â–¶ Team: 6/6 students â”€â”€â–¶ is_complete: TRUE âœ“
```

### Attendance Status Timeline

```
Time: 14:00  â†’  Tap #1  â†’  Status: IN   â†’  Log ID: 1
Time: 18:00  â†’  Tap #2  â†’  Status: OUT  â†’  Log ID: 2
Time: 14:00  â†’  Tap #3  â†’  Status: IN   â†’  Log ID: 3
Time: 17:30  â†’  Tap #4  â†’  Status: OUT  â†’  Log ID: 4
```

---

## ğŸ”’ Validation Pipeline

```
API Request
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   JSON Schema Valid?    â”‚
â”‚   - Required fields     â”‚
â”‚   - Data types          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚ YES
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Business Rules OK?    â”‚
â”‚   - RFID unique?        â”‚
â”‚   - Team capacity?      â”‚
â”‚   - Max teams limit?    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚ YES
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Database Constraints  â”‚
â”‚   - Foreign keys        â”‚
â”‚   - Unique indexes      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚ YES
    â–¼
   SUCCESS âœ“
```

---

## ğŸ“ˆ System Capacity

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          System Limits                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                          â”‚
â”‚  Max Teams:            25                â”‚
â”‚  Students per Team:    6                 â”‚
â”‚  Total Students:       150 (max)         â”‚
â”‚  Attendance Logs:      Unlimited         â”‚
â”‚                                          â”‚
â”‚  Performance:                            â”‚
â”‚  - RFID Lookup:        O(log n)          â”‚
â”‚  - Attendance Insert:  O(1)              â”‚
â”‚  - History Query:      O(n)              â”‚
â”‚                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ›¡ï¸ Error Handling Flow

```
API Request
    â”‚
    â”œâ”€â”€â–¶ Valid Input?
    â”‚    â”‚ NO
    â”‚    â””â”€â”€â–¶ 400 Bad Request
    â”‚         "Required field missing"
    â”‚
    â”œâ”€â”€â–¶ Resource Exists?
    â”‚    â”‚ NO
    â”‚    â””â”€â”€â–¶ 404 Not Found
    â”‚         "Team with ID X not found"
    â”‚
    â”œâ”€â”€â–¶ Business Rules OK?
    â”‚    â”‚ NO
    â”‚    â””â”€â”€â–¶ 400 Bad Request
    â”‚         "RFID already registered"
    â”‚
    â”œâ”€â”€â–¶ Database Error?
    â”‚    â”‚ YES
    â”‚    â””â”€â”€â–¶ 500 Internal Error
    â”‚         "Server error: ..."
    â”‚
    â””â”€â”€â–¶ Success!
         200 OK / 201 Created
```

---

## ğŸ”„ Transaction Flow (RFID Tap)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Atomic Transaction                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

BEGIN TRANSACTION
  â”‚
  â”œâ”€â–¶ Lock: Read student record
  â”‚
  â”œâ”€â–¶ Lock: Read last attendance log
  â”‚
  â”œâ”€â–¶ Compute: New status (toggle)
  â”‚
  â”œâ”€â–¶ Write: Insert new attendance log
  â”‚
  â””â”€â–¶ COMMIT
       â”‚
       â”œâ”€â”€â–¶ Success: Return 200 OK
       â”‚
       â””â”€â”€â–¶ Failure: ROLLBACK + Return 500
```

---

## ğŸŒ Integration Points

### Frontend Integration
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Web Frontend   â”‚
â”‚   (React/Vue)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ HTTP/JSON
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Django API     â”‚
â”‚   (This System)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ ORM
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   SQLite DB      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Hardware Integration
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  RFID Reader     â”‚
â”‚  (RC522/PN532)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ Serial/USB
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Microcontroller â”‚
â”‚  (Arduino/RPi)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ HTTP POST
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Django API     â”‚
â”‚   (This System)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š State Machine Diagram

### Attendance Status State Machine

```
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚   NO LOGS   â”‚
         â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                â”‚
         [First Tap]
                â”‚
                â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”Œâ”€â”€â”€â”¤   CHECKED    â”‚
    â”‚   â”‚      IN      â”‚â—„â”€â”€â”€â”€â”
    â”‚   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
    â”‚          â”‚              â”‚
    â”‚   [Tap Again]           â”‚
    â”‚          â”‚              â”‚
    â”‚          â–¼              â”‚
    â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
    â”‚   â”‚   CHECKED   â”‚       â”‚
    â””â”€â”€â–¶â”‚     OUT     â”‚â”€â”€â”€â”€â”€â”€â”€â”˜
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            [Tap Again]
```

---

## ğŸ¯ Key Design Principles

1. **Single Responsibility**: Each component has one clear purpose
2. **Separation of Concerns**: Models â‰  Logic â‰  API
3. **Data Integrity**: Database constraints + validation layers
4. **Idempotency**: Safe to retry operations
5. **Atomicity**: Transactions for critical operations
6. **Scalability**: Indexed lookups, efficient queries
7. **Maintainability**: Clear code structure, documentation

---

**System Architecture Version:** 1.0  
**Last Updated:** February 6, 2026  
**Framework:** Django 5.2.5
